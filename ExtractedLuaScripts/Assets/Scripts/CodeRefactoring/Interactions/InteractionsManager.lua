---
--- Generated by EmmyLua(https://github.com/EmmyLua)
--- Created by chenlongfa.
--- DateTime: 2023/9/26 11:14
---

local Class = require("Framework.Lua.Class")
---@class InteractionsManager
local InteractionsManager = Class("InteractionsManager")

---@type InteractionsNew[][]
local EntityGroups = {}

---@return InteractionsNew
function InteractionsManager:CreateEntity(tag, createNewObjId)
    if not createNewObjId then
        return
    end
    if not EntityGroups[tag] then
        EntityGroups[tag] = {}
    end
    local entity = require("CodeRefactoring.Interactions.InteractionsNew").create()
    entity.m_objID = createNewObjId
    EntityGroups[tag][createNewObjId] = entity
    return entity
end

---@return InteractionsNew
function InteractionsManager:GetEntity(tag,objID)
    if not objID or not EntityGroups[tag] then
        return
    end
    return EntityGroups[tag][objID]
end

function InteractionsManager:GetEntities(tag)
    return EntityGroups[tag]
end

---@param entity InteractionsNew
function InteractionsManager:RemoveEntity(entity)
    local tag = entity.m_tag
    local objID = entity.m_objID
    if not tag or not objID then return end
    if EntityGroups[tag] then
        EntityGroups[tag][objID] = nil
    end
end

-----解雇后需要清空会议室的占用
--function InteractionsManager:OnEmployeeDismiss(companyIndex,roomIndex)
--    for tag,group in pairs(EntityGroups)  do
--        for objID,entity in pairs(group) do
--            if entity.m_roomIndex == roomIndex then
--                entity.m_roomIndex = nil
--                break
--            end
--        end
--    end
--end

return InteractionsManager