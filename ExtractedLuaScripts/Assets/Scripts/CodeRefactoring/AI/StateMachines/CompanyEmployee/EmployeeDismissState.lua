---
--- Generated by EmmyLua(https://github.com/EmmyLua)
--- Created by chenlongfa.
--- DateTime: 2023/9/6 18:59
---
---
local Class = require("Framework.Lua.Class")
local AIStateBase = require("CodeRefactoring.AI.StateMachines.AIStateBase")
---@class EmployeeDismissState:AIStateBase
---@field m_owner CompanyEmployeeNew
---被解雇的状态，会跑到解雇终点，然后执行Exit()回收
local EmployeeDismissState = Class("EmployeeDismissState",AIStateBase)

local ActorDefine = require("CodeRefactoring.Actor.ActorDefine")
local CfgMgr = GameTableDefine.ConfigMgr

function EmployeeDismissState:ctor()

end

function EmployeeDismissState:OnEnter(...)
    self.m_owner:RemoveFlag(ActorDefine.Flag.FLAG_EMPLOYEE_OFF_WORKING|
            ActorDefine.Flag.FLAG_EMPLOYEE_ON_WORKING |
            ActorDefine.Flag.FLAG_EMPLOYEE_ON_ACTION)
    self:MoveToDismissPos()
    self.m_owner:CheckFloatState()
end

function EmployeeDismissState:MoveToDismissPos()
    local destination = self.m_owner.m_dismissPosition
    self.m_owner:RandomElevatorMoveTo(destination,nil,function()
        self.m_owner:Exit()
    end,CfgMgr.config_global.character_run_v)
    --self.m_owner.m_stateMachine:SetAnimator(PERSON_ACTION.WALK)
    --self.m_owner.m_stateMachine:CalculatePath(self.m_owner,destination,true,speed,1,function()
    --    self.m_owner:Face2Target(self.m_owner.m_TargetRotation,0.5,function ()
    --        self.m_owner.m_stateMachine:ChangeState(ActorDefine.State.EmployeeWorkState)
    --    end)
    --end)
end

function EmployeeDismissState:OnExit()
end

function EmployeeDismissState:Event(msg, params)
end

return EmployeeDismissState