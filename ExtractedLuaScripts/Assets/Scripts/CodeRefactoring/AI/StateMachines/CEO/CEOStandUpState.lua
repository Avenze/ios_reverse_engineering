---
--- Generated by EmmyLua(https://github.com/EmmyLua)
--- Created by chenlongfa.
--- DateTime: 2025/2/8 16:30
---

local Class = require("Framework.Lua.Class")
local AIStateBase = require("CodeRefactoring.AI.StateMachines.AIStateBase")
---@class CEOStandUpState:AIStateBase
---@field m_owner CEOActor
local CEOStandUpState = Class("CEOStandUpState",AIStateBase)

local PERSON_ACTION = require("CodeRefactoring.Actor.PersonActionDefine")
local ActorDefine = require("CodeRefactoring.Actor.ActorDefine")

function CEOStandUpState:ctor()

end

function CEOStandUpState:OnEnter(...)
    local action = PERSON_ACTION.SIT2IDLE
    local keyFrames = {{}}
    keyFrames[1].key = "ANIM_SIT2IDLE_END"
    keyFrames[1].func = handler(self,self.OnStandUpAnimOver)
    self.m_owner:SetAnimator(action, keyFrames)
end

function CEOStandUpState:OnExit()
end

function CEOStandUpState:OnStandUpAnimOver()
    if self.m_owner:HasFlag(ActorDefine.Flag.FLAG_EMPLOYEE_OFF_WORKING) then
        --下班
        self.m_owner.m_stateMachine:ChangeState(ActorDefine.State.CEOOffWorkState)
    else
        self.m_owner.m_stateMachine:ChangeState(ActorDefine.State.CEOGoToWorkState)
    end
end

return CEOStandUpState