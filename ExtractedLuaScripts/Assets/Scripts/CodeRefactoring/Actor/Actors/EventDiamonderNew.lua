---
--- Generated by EmmyLua(https://github.com/EmmyLua)
--- Created by chenlongfa.
--- DateTime: 2023/8/31 14:48
---

local Class = require("Framework.Lua.Class")
local PersonBase = require("CodeRefactoring.Actor.Actors.PersonBase")
---@class EventDiamonderNew:PersonBase
---@field super PersonBase
local EventDiamonderNew = Class("EventDiamonderNew",PersonBase)

local ActorDefine = require("CodeRefactoring.Actor.ActorDefine")
EventDiamonderNew.EVENT_LEAVE_SCENE = 1001

function EventDiamonderNew:ctor(...)
    self:getSuper(EventDiamonderNew).ctor(self,...)
    self.m_tempGo = nil
    self.m_eventId = nil
    self.m_type = ActorDefine.ActorType.Diamonder
end

function EventDiamonderNew:Init(rootGo, tempGo, position, targetPosition, eventId)
    self.m_tempGo = tempGo
    self.m_eventId = eventId
    self:getSuper(EventDiamonderNew).Init(self,rootGo, nil, position, targetPosition)
end

function EventDiamonderNew:OnLoadGOSuccess()
    self:getSuper(EventDiamonderNew).OnLoadGOSuccess(self)

    if self:HasFlag(ActorDefine.Flag.FLAG_SPONSOR_WAITING) then
        self.m_go.transform.position = self.m_targetPosition
        self.m_stateMachine:ChangeState(ActorDefine.State.EventDiamonderWaiting)
    else
        self.m_stateMachine:ChangeState(ActorDefine.State.EventDiamonderComing)
    end
end

return EventDiamonderNew