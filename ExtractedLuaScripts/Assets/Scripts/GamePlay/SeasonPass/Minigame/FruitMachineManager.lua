---
--- Generated by EmmyLua(https://github.com/EmmyLua)
--- Created by Microsoft-GXY.
--- DateTime: 2025/3/4 11:25
---

---@class FruitMachineManager
local FruitMachineManager = GameTableDefine.FruitMachineManager

local isThreeDraw = false
local isDrawing = false



local rewardList = {
    1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20
}
local winningRate = {
    1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20
}

function FruitMachineManager:InitFruitMachine()
    -- 声明定义
    self.rateMap = nil  ---概率分布
    self.itemMap = nil
    
    
    -- 初始化流程
    
end

function FruitMachineManager:GenerateRateMap()
    self.rateMap = {}
    for i = 1, winningRate do
        self.rateMap[i] = winningRate[i] + (self.rateMap[i - 1] or 0)
    end
end

function FruitMachineManager:GetLuckyDrawResult()
    local max = self.rateMap[#self.rateMap]
    local random = math.random(1, max)
    for i = 1, #self.rateMap do
        if self.rateMap[i] >= random then
            return rewardList[i]
        end
    end
end

function FruitMachineManager:StartDraw()
    -- 抽奖结果
    local drawResult = self:GetLuckyDrawResult()
    
    -- 抽奖表现
    
end